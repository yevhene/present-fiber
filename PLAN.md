# Fiber

- Default demo
  - Stack
  - Fiber
- Fiber explanation
- Fiber advantages
  - Fragment (Array and Strings)
  - Error boundaries
  - Portals
  - Async rendering (deferredUpdates)
- Beyond
  - Offscreen/Hidden Prioritization
  - Better Code Splitting
    - Commit phase
    - Pre-render content without update the DOM
- ReactDOMFiber.unstable_deferredUpdates
  - Multiple calls
- Default demo highlights
  - Delay
  - deferredUpdates
  - Redraw and shouldComponentUpdate
  - break demo by overloading work loop
- My demo
  - Problems
  - Outcome

- Fiber explanation
  - Reconciliation algorithm
  - Virtual DOM
  - High/Low priority up[dates
  - 16ms frame overlap
  - Reconciler
  - Cooperative scheduling (multitasking)
  - Fiber = plain javascript object, 1:1 with virtual dom instance
  - fiber = { stateNode, child, return. sibling }
  - HostRoot
  - current/workInProgress tree
  - old imediately update dom
  - render/reconciliation phase 1, interruptibe, multicallbacks
    - componentWillMount
    - componentWillReceiveProps
    - shouldComponentUpdate
    - componentWillUpdate
  - commit 2 phase, ininterruptible
    - componentDidMount
    - componentDidUpdate
    - componentWillUnmount
  - requestIdleCallback (browser support)
  - this.setState(callback) (object deprecated)
  - shouldComponentUpdate
  - effect list
  - pendingCommit
  - tree reusing (doubleBuffering two buffers)
  - componentDidUpdate
  - priorities
    - synchronous // same as stack rec?
    - task // before next tick?
    - animation // before next frame?
    - high // pretty soon
    - low // minor delays ok
    - offscreen // prep for display/scroll
  - starvation
